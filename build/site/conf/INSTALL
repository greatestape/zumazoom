Hosting
=======
The site is hosted on the SamLand slice.

The setup instructions below are the ones used to set up that slice.

IP: 173.45.224.163

Operating System
----------------
Ubuntu 8.04 (Hardy)

Backups
-------
Backups will be pulled from the slice and stored on a disk at my home.

Setup
=====

sudo aptitude install logcheck cron-apt exim4-daemon-light monit
sudo vi /etc/aliases (redirect root email to sam@pocketuniverse.ca)
sudo dpkg-reconfigure exim4-config (Internet config)
sudo cp /etc/cron-apt/action.d/3-download /etc/cron-apt/action.d/4-update
sudo vi /etc/cron-apt/action.d/4-update (removed -d)
sudo vi /etc/cron-apt/config (use aptitude)

sudo aptitude install apache2 apache2-mpm-prefork cronolog
sudo aptitude install libapache2-mod-wsgi python-psycopg2 python-imaging ipython postgresql-client
sudo a2enmod mod-wsgi
sudo ln -s /home/sam/projects/mrc/build/site/hosting/prod/mrc.pocketuniverse.ca /etc/apache2/sites-available/
sudo a2ensite mrc.pocketuniverse.ca

sudo ln -s /home/sam/projects/mrc/build/site/hosting/prod/firewall.sh /etc/init.d/firewall.sh
sudo /etc/init.d/firewall.sh test
sudo /etc/init.d/firewall.sh start
sudo update-rc.d firewall.sh defaults

sudo ln -sf /home/sam/projects/mrc/build/site/hosting/prod/munin-node.conf /etc/munin/munin-node.conf
sudo /etc/init.d/munin-node restart

sudo aptitude install monit
sudo aptitude install w3m
sudo cp /home/sam/projects/mrc/build/site/hosting/prod/monitrc /etc/monit/monitrc (monitrc can't be a symlink)
sudo vi /etc/default/monit (startup=1)
sudo /etc/init.d/monit start
w3m http://localhost:2812 (make sure monit is working)

sudo /etc/init.d/apache2 stop (make sure monit is working)

sudo /etc/init.d/apache2 restart